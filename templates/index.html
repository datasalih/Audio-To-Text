<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Audio to Text Transcription</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #121212; /* Dark background */
            color: #E0E0E0; /* Light grey text for contrast */
            padding: 20px;
            line-height: 1.6;
            margin: 0;
        }
        h1 {
            color: #ffffff; /* White color for the text */
            text-align: center; /* Centers the text horizontally */
        }
        .description {
            color: #BDBDBD; /* Light grey text for the description */
            text-align: center; /* Centers the description text */
            margin-top: 10px; /* Adds some space below the title */
        }
        .button {
            background-color: #121212; /* Dark background for the button */
            color: #ffffff; /* White text on the button for contrast */
            padding: 10px 20px;
            border: 2px solid #ffffff; /* White border color */
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            display: inline-block; /* Align button with the file name */
        }
        .button:hover {
            background-color: #42394c; /* Darker shade on hover */
            color: #ffffff; /* Ensures text color remains white on hover */
        }
        .file-upload {
            margin-bottom: 20px;
            text-align: center; /* Center the file upload components */
        }
        .file-upload input[type="file"] {
            display: none;
        }
        .file-upload label {
            display: inline-block;
            padding: 10px 20px;
            border: 2px solid #ffffff; /* White border color */
            border-radius: 5px;
            color: #ffffff; /* White text color */
            background-color: transparent; /* Transparent background */
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .file-upload label:hover,
        .file-upload label:active {
            background-color: #42394c; /* Darker background on hover/active */
            color: #ffffff; /* White text color on hover/active */
        }
        #file-name {
            color: #ffffff; /* White text for file name for readability */
            margin-left: 10px; /* Space between upload label and file name */
        }
        #transcription-result {
            background-color: #1F1B24; /* Darker grey for the result box */
            color: #ffffff; /* White text for readability */
            border: 1px solid #ffffff; /* White border color */
            padding: 20px;
            border-radius: 5px;
            min-height: 300px;
            white-space: pre-wrap; /* Preserves formatting */
            overflow-wrap: break-word;
            margin-top: 20px; /* Adds some space above the result box */
        }
        #loading-bar {
            display: inline-block;
            width: 50px;
            height: 10px;
            background-color: #ffffff;
            margin-left: 10px;
            border-radius: 5px;
            overflow: hidden; /* Hide the inner bar overflow */
            vertical-align: middle; /* Align with the button vertically */
            display: none; /* Initially hidden */
        }
        .loading-animation {
            height: 100%;
            width: 0;
            background-color: #42394c;
            animation: loadingAnimation 2s linear infinite;
        }
        @keyframes loadingAnimation {
            0% { width: 0; }
            50% { width: 100%; }
            100% { width: 0; }
        }
    </style>
</head>
<body>
    <h1>Audio to Text Transcription</h1>
    <div class="file-upload">
        <input type="file" id="file-upload" accept=".mp3, .mp4, .wav, .m4a, .flac">
        <label for="file-upload">ðŸ“Ž Upload File</label>
        <span id="file-name">No file chosen</span>
    </div>
    <button class="button" onclick="transcribeAudio()">Transcribe</button>
    <div id="transcription-result">Your transcription will appear here...</div>

    <script>
        function updateFileName() {
            const fileInput = document.getElementById('file-upload');
            const fileNameDisplay = document.getElementById('file-name');
            fileNameDisplay.textContent = fileInput.files.length > 0 ? fileInput.files[0].name : 'No file chosen';
        }

        document.getElementById('file-upload').addEventListener('change', updateFileName);

        async function transcribeAudio() {
            const fileInput = document.getElementById('file-upload');
            if(fileInput.files.length === 0) {
                alert('Please select a file to transcribe.');
                return;
            }
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            try {
                const response = await fetch('/transcribe', {
                    method: 'POST',
                    body: formData,
                });
                if (response.ok) {
                    const result = await response.json();
                    document.getElementById('transcription-result').textContent = result.transcription;
                } else {
                    document.getElementById('transcription-result').textContent = 'Failed to transcribe. Please try again.';
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('transcription-result').textContent = 'An error occurred during transcription.';
            }
        }
    </script>
</body>
</html>
